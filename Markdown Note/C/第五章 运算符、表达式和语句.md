## 5.1基本运算符

C用运算符表示算术运算，基本算术运算的运算符：=、+、-、*和/

C没有指数运算符，但标准数学库提供了一个pow()函数用于指数运算：例如

```
pow(2.5,2.2)  //返回2.2的2.2次幂
```



##### 5.1.1 赋值运算符

=并不意味相等，而是赋值，例如：

```
int age=18; 
```

把值18赋给变量age。 =号的左侧是一个变量名，右侧是赋给变量的值；



```
18=age；
```

这样的语句是无效的，因为在这种情况下，18被称为右值，而18是个常量，常量本身就是个值。因此要记住，在编写代码时，=号左侧的项必须是一个变量名



**几个术语：数据对象、左值、右值和运算符**

只有在C语言中，用于存储值的数据存储区统称为**数据对象**。使用变量名是标识对象的一种方法，其他方法如数组、结构、指针（后面的章节讲解）

**左值**用于标识特定对象或的名称。因此，左值是用于标识或定位存储位置的标签

**右值**指的是能赋值给左值的量。右值可以是常量、变量或其他可求值的表达式，例如：

```
bmv=2025;
```

这里2025是右值

我们把运算对象称为"项",类似的可以说，=运算符的左侧运算对象应该是可修改的左值



##### 5.1.2加法运算符：+

加法运算符用于加法运算，使其两侧的值相加；例如：

```c
printf("%d",4+20);//输出24
```

相加的对象可以是变量，也可以是常量

```
int a,b;
b=10;
a=b+5;
printf("%d",a);
```





##### 5.1.2减法运算符:-

类似的，减法运算符使左侧数减去右侧的数，例如:

```
takehome=100-50;
```



##### 5.1.3 符号运算符：-和+

减号可以标明一个值的代数符号：

rock=-12;

以这种方法使用的负号被称为一元运算符

C90标准新增了一元+运算符，它不会改变运算对象的值或符号，只能这样使用

```c
dozen=+12;
```



##### 5.1.4 乘法运算符 ：*

符号*表示乘法。

```
cm = 2.5*inch;
```

用2.5乘以inch，赋给cm

打印一个平方表

```\#include<stdio.h>
 int main(){
   int a=1;
   while(a++<10){
     printf("%d %4d\n",a,a*a);
     
   }
 }
```



##### 5.1.5 除法运算符： /

/的左侧是被除数，/的右侧是除数，整数除法和浮点数除法不同，浮点数的除法的结果是浮点数，而整数除法的结果是整数，整数是没有小数点的，如：

```
int a = 5/3;
```

数学运算中，a应该=1.6666。但在C语言中，小数部分将被遗弃，所以a的值应该是1。这一过程被称为**截断**



##### 5.1.6运算符优先级

从高往低

| 运算符       | 结合律   |
| ------------ | -------- |
| （）         | 从左往右 |
| + -(一元)    | 从右往左 |
| * /          | 从左往右 |
| + - （二元） | 从左往右 |
| =            | 从右往左 |

如这样的一个语句：

```
y=6*12+5*20
```

应该先算乘法部分，y=72+100,然后再算加法，y=172;在将172赋给y





## 5.2 其他运算符

C语言大约有40个运算符，有些运算符比其他运算符常用得多，现在介绍4个常用的运算符



##### 5.2.1sizeof运算符和size_t类型

sizeof运算符以字节为单位返回运算对象的大小，运算对象可以是具体的数据对象或类型。如果运算对象是类型，则必须用圆括号将其括起来。

```
	int a=10;
	printf("%zd",sizeof a ); //合法
	printf("%zd",sizeof(a));//合法
	printf("%zd",sizeof(long));  //合法
	printf("%zd",sizeof long);  //非法
```

C语言规定，sizeof返回size_t类型的值。这是一个无符号整数类型，但不是新类型，size_t是语言定义的标准类型，C有一个typedef机制，允许为现有类型创造别名

c99标准做了进一步调整，新增了%zd转换说明用于printf()显示size_t类型的值。如果系统不支持%zd，可使用%u或%lu代替%zd



##### 5.2.2 求模运算符:%

求模运算符用于整数运算，求模运算符给出其**左侧整数除以右侧整数的余数**，例如,13%5（读作13求模5）得3；

注意求模运算符只能用于整数运算，不能用于浮点数，另外，当年想判断一个数是偶数或是奇数时，%运算符非常有用：

```\#include<stdio.h>
#include<stdio.h>
int main() {
	int a;
	printf("请输入一个整数:");
	scanf("%d", &a);
	if (a % 2 == 0) { //如果a%2==0，则代表他能被2除尽，没有余数，即为偶数
		printf("%d为偶数", a);
	}
	else { //反之，则为奇数
		printf("%d为奇数", a);
	}
}
```





##### 5.2.3 递增运算符：++

递增运算符将其运算对象递增1，该运算符以两种方式出现

1. 前缀模式：++a; 表达式本身的值先加1，再将a值+1
2. 后缀模式：a++表达式本身的值不变，然后讲a值+1
   

不管那种模式，其最后的作用都是a值加1；

```
int a=1;
printf("%d,",a++);
printf("%d",a);

//其输出,1,2
```



##### 5.2.4递减运算符

递减运算符将其运算对象递减1，同样的以两种方式出现

1. 前缀模式：--a; 表达式本身的值先减1，再将a值-1
2. 后缀模式：a--表达式本身的值不变，然后将a值-1

```
int a=1;
printf("%d,",a--);
printf("%d",a);

//其输出1,0
```

递增和递减运算符多用于while和for循环

```
int main() {
	int a=1;
	while(a<10){
		printf("%d",a);
		a++;
	}
	
}
将输出1-9
```



##### 5.2.5 优先级

**递增递减拥有很高的优先级，只次于（）运算符**

x\*y++ 表示为x\*(y++)

而不是(x\*y)++,这样的运算是无效的，因为递增递减运算符只能影响一个变量

 

## 5.3表达式和语句

表达式是由运算符和运算对象组成，最简单的表达式是一个单独的运算对象，下面是一些表达式：

4

-6

4+21

a*(b+c/d)/20



**每一个表达式都有值**

C表达式的一个重要特性，每个表达式都有一个值，要想获得这个值，必须根据运算优先级规定的顺序来执行操作

赋值运算符的表达式的值等于赋值左边变量的值相同。因此 q=5*2的值是10



##### 5.3.1 语句

**语句是C程序的基本构建块，一条语句相当于一条完整的计算机指令**,语句都使用分号结尾



##### 5.3.2 块（复合语句）

**复合语句**是用花括号括起来的一条或多条语句，复合语句也称为块

```
while(i<10){
	pirntf("%d",i);
	i++;
}
```





## 5.4 类型转换

通常，在语句和表达式中应使用类型相同的变量和常量。但是，如果使用混合类型，C语言会采用一套规则进行**自动转换**

1. 当类型转换出现在表达式时，无论是unsgined还是signed的char和short都会被转换成int；由于都是从较小类型转换为较大类型，所以这些转换被称为**升级**
2. **涉及两种类型的运算，两个值会分别被转换成两种类型的更高级别**
3. 类型的级别从高至低依次是：long double、double、float、unsigned long long、long long 、unsigned long 、long 、unsigned int 、int。之所以没有列出char和short，是因为他们已经被升级成了int或unsigned int;
4. **在赋值表达式语句中，计算的最终结果会被转换成被赋值变量的类型。这个过程可能导致类型升级或降级**
5. **当作为函数参数传递时，char和short被转换为int，float被转换double。**



##### 5.4.1 强制类型转换运算符

圆括号和它括起来的类型名构成了**强制类型转换运算符**（）:

```
(type) 被转换对象
```

被转换对象会被转换成括号里的类型,如：

```
a=(int)1.3;
```

强制类型转换运算符会把浮点数1.3转换为整型，小数部分会被截断，所以最终a的值为1；







## 5.5 带参数的函数

```
#include <stdio.h>
void pirnt_two(int age);  //函数原型声明
int main()
{
	printf("你今年贵庚？");
	int a = 0;
	scanf_s("%d", &a);
	print_two(a); //调用函数
}

//定义函数
void print_two(int age) {
	printf("我今年%d岁了！", age);
}
```

void printf_two(int n)叫做函数头，一般声明在main函数前面

void为返回值类型，这里的void代表不需要返回值

我们把**定义在函数括号内的参数，叫形式参数**，该例中，形式参数是int类型的变量age。在该程序中，调用pirnt_two(a)就是把a的值赋给形式参数age，我们称**函数调用传递的值为实际参数**



## 5.6 编程练习

1. 编写一个程序，把用分钟表示的时间转换成用小时和分钟表示的时间，使用#define 或const创建一个表示60的符号常量或const变量。通过while循环让用户程序输入值，知道用户输入小于或等于0的值才停止循环

   ```c
   #include <stdio.h>
   #define MINUTE 60
   int main() {
   	int total_minute = 0;
   	
   	printf("请输入一个总分钟数：");
   	scanf("%d", &total_minute);
   	while (total_minute > 0) {
   		int hours = total_minute / MINUTE;  //总分钟数/60 ==小时数
   		int minute = total_minute % MINUTE; // 总分钟数% 60 ==分钟数
   		printf("转换为时间表示：%d小时%d分钟\n", hours, minute);
   		printf("请继续输入:");
   		scanf_s("%d", &total_minute);
   	}
   	printf("循环结束.....");
   	return 0;
   }
   ```

2. 编写一个程序，提示用户输入一个整数，然后打印从该数到比该数大10的所有整数（例如，用户输入5，则打印5-15的整数，包括5和15），要求打印的各值之间用一个空格、制表符或换行符分开

   ```
   #include <stdio.h>
   #define MINUTE 60
   int main() {
   	int a = 0;
   	printf("请输入一个整数:");
   	scanf_s("%d", &a);
   	printf("我将打印%d到%d之间的数（包括%d,%d:\n",a, a + 10, a, a + 10);
   	int b = a + 10;
   	while (a <= b) {
   		printf("%d ", a);
   		a++;
   	}
   	
   	
   }
   ```

3. 编写一个程序，提示用户输入天数，然后将其转换周数和天数。例如，用户输入18，则转换成2周14天。以下面的格式显示结果：

   2周4天总共18天

   ```
   #include <stdio.h>
   #define WEEK 7
   int main() {
   	int days = 0;
   	printf("请输入天数：");
   	scanf("%d", &days);
   	int week = days / WEEK;
   	int day = days % WEEK;
   
   	printf("%d周%d天总共%d天：", week, day, days);
   }
   ```

4. 编写一个程序，提示用户输入一个double类型的数，并打印该数的立方值。自己设计一个函数并打印立方值，main()函数要把用户输入的值传递给该函数

   ```
   #include <stdio.h>
   void lifang(double c);
   int main() {
   	double d = 0.0;
   	printf("请输入一个浮点数");
   	scanf("%lf", &d);
   	lifang(d);
   }
   void lifang(double c) {
   	printf("%.4lf", c * c * c);
   }
   ```

5. 编写一个程序，求解一元二次方程：

   ```
   #include <stdio.h>
   //仅对于解一般的一元二次方程。对于可化简的二元方程求解不准确
   double sqar(double n);  //开二次根函数
   double pow(double x, int n); //次方函数
   int main() {
   	//二元一次方程一般式：Ax^2+Bx+C=0
   	//需要ABC三个参数
   	double A, B, C;
   	double x1=0,x2=0;  //一般有两个根
   	double derta;  //判别式
   	printf("二元一次方程一般式为：Ax^2+Bx+C=0\n");
   	printf("请输入三个系数的值：\nA:");
   	scanf_s("%lf", &A);
   	printf("B:");
   	scanf_s("%lf", &B);
   	printf("C:");
   	scanf_s("%lf", &C);
   
   	derta = sqar(pow(B, 2) - 4 * A * C);
   	//如果derta传入进去出来还是原数，则说明无法开二次根，直接进入运算；
   	if (derta > 0) {
   		if (derta == pow(B, 2) - 4 * A * C) {
   			printf("一元二次方程：% .lfx^2%+.lfx%+.lf=0的两个根为\n：x1= (-%.2lf-根号下%.2lf)/%.2lf"
   				"\nx2= (-%.2lf+根号下%.2lf)/%.2lf\n", A, B, C, B,derta,2*A, B, derta, 2 * A);
   		}
   		else {
   			x1 = (-B + derta) / 2 * A;
   			x2 = (-B - derta) / 2 * A;
   			printf("一元二次方程：% .lfx^2%+.lfx%+.lf=0的两个根为：%.2lf %.2lf", A, B, C, x1, x2);
   		}
   		
   	}
   	else if (derta == 0) {
   		x2=x1= (-B + derta) / 2 * A;
   		printf("一元二次方程：% .lfx^2%+.lfx%+.lf=0的两个根为：%.2lf %.2lf", A, B, C, x1, x2);
   	}
   	else {
   		printf("该方程无根\n");
   	}
   
   	
   }
   double sqar(double n) {
   	for (int i = 0;i < n;i++) {
   		if (i * i == n) {
   			return i;
   		}
   	}
   
   	return n;
   }
   
   double pow(double x, int n) {
   	int h = x;
   	for (int i = 1; i <n;i++) {
   		x= x*h;
   	}
   	return x;
   }
   ```

   
